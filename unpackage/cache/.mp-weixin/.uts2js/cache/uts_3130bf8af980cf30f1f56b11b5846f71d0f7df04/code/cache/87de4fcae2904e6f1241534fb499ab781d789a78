{"code":"import { defineComponent } from \"vue\";\nimport mpMixin from '@/uni_modules/uv-ui-tools/libs/mixin/mpMixin.js';\nimport mixin from '@/uni_modules/uv-ui-tools/libs/mixin/mixin.js';\nimport props from './props.js';\n/**\n * switch 开关选择器\n * @description 选择开关一般用于只有两个选择，且只能选其一的场景。\n * @tutorial https://www.uvui.cn/components/switch.html\n * @property {Boolean}\t\t\t\t\t\tloading\t\t\t是否处于加载中（默认 false ）\n * @property {Boolean}\t\t\t\t\t\tdisabled\t\t是否禁用（默认 false ）\n * @property {String | Number}\t\t\t\tsize\t\t\t开关尺寸，单位px （默认 25 ）\n * @property {String}\t\t\t\t\t\tactiveColor\t\t打开时的背景色 （默认 '#2979ff' ）\n * @property {String} \t\t\t\t\t\tinactiveColor\t关闭时的背景色 （默认 '#ffffff' ）\n * @property {Boolean | String | Number}\tvalue\t\t\t通过v-model双向绑定的值 （默认 false ）\n * @property {Boolean | String | Number}\tactiveValue\t\t打开选择器时通过change事件发出的值 （默认 true ）\n * @property {Boolean | String | Number}\tinactiveValue\t关闭选择器时通过change事件发出的值 （默认 false ）\n * @property {Boolean}\t\t\t\t\t\tasyncChange\t\t是否开启异步变更，开启后需要手动控制输入值 （默认 false ）\n * @property {String | Number}\t\t\t\tspace\t\t\t圆点与外边框的距离 （默认 0 ）\n * @property {Object}\t\t\t\t\t\tcustomStyle\t\t定义需要用到的外部样式\n *\n * @event {Function} change 在switch打开或关闭时触发\n * @example <uv-switch v-model=\"checked\" active-color=\"red\" inactive-color=\"#eee\"></uv-switch>\n */\nexport default defineComponent({\n    name: \"uv-switch\",\n    mixins: [mpMixin, mixin, props],\n    data() {\n        return {\n            bgColor: '#ffffff',\n            innerValue: false\n        };\n    },\n    watch: {\n        modelValue: {\n            immediate: true,\n            handler(newVal = null) {\n                if (newVal !== this.inactiveValue && newVal !== this.activeValue) {\n                    return this.$uv.error('v-model绑定的值必须为inactiveValue、activeValue二者之一');\n                }\n                this.innerValue = newVal;\n            }\n        }\n    },\n    created() {\n        this.innerValue = this.value || this.modelValue;\n    },\n    computed: {\n        isActive() {\n            return this.innerValue === this.activeValue;\n        },\n        switchStyle() {\n            let style = new UTSJSONObject({}\n            // 这里需要加2，是为了腾出边框的距离，否则圆点node会和外边框紧贴在一起\n            );\n            // 这里需要加2，是为了腾出边框的距离，否则圆点node会和外边框紧贴在一起\n            style.width = this.$uv.addUnit(this.$uv.getPx(this.size) * 2 + 2);\n            style.height = this.$uv.addUnit(this.$uv.getPx(this.size) + 2);\n            // 如果自定义了“非激活”演示，name边框颜色设置为透明(跟非激活颜色一致)\n            // 这里不能简单的设置为非激活的颜色，否则打开状态时，会有边框，所以需要透明\n            if (this.customInactiveColor) {\n                style.borderColor = 'rgba(0, 0, 0, 0)';\n            }\n            style.backgroundColor = this.isActive ? this.activeColor : this.inactiveColor;\n            return style;\n        },\n        nodeStyle() {\n            let style = new UTSJSONObject({}\n            // 如果自定义非激活颜色，将node圆点的尺寸减少两个像素，让其与外边框距离更大一点\n            );\n            // 如果自定义非激活颜色，将node圆点的尺寸减少两个像素，让其与外边框距离更大一点\n            style.width = this.$uv.addUnit(this.$uv.getPx(this.size) - this.space);\n            style.height = this.$uv.addUnit(this.$uv.getPx(this.size) - this.space);\n            const translateX = this.isActive ? this.$uv.addUnit(this.space) : this.$uv.addUnit(this.$uv.getPx(this.size));\n            style.transform = `translateX(-${translateX})`;\n            return style;\n        },\n        bgStyle() {\n            let style = new UTSJSONObject({}\n            // 这里配置一个多余的元素在HTML中，是为了让switch切换时，有更良好的背景色扩充体验(见实际效果)\n            );\n            // 这里配置一个多余的元素在HTML中，是为了让switch切换时，有更良好的背景色扩充体验(见实际效果)\n            style.width = this.$uv.addUnit(this.$uv.getPx(this.size) * 2 - this.$uv.getPx(this.size) / 2);\n            style.height = this.$uv.addUnit(this.$uv.getPx(this.size));\n            style.backgroundColor = this.inactiveColor;\n            // 打开时，让此元素收缩，否则反之\n            style.transform = `scale(${this.isActive ? 0 : 1})`;\n            return style;\n        },\n        customInactiveColor() {\n            // 之所以需要判断是否自定义了“非激活”颜色，是为了让node圆点离外边框更宽一点的距离\n            return this.inactiveColor !== '#fff' && this.inactiveColor !== '#ffffff';\n        }\n    },\n    methods: {\n        clickHandler() {\n            if (!this.disabled && !this.loading) {\n                const oldValue = this.isActive ? this.inactiveValue : this.activeValue;\n                if (!this.asyncChange) {\n                    this.$emit('input', oldValue);\n                    this.$emit('update:modelValue', oldValue);\n                }\n                // 放到下一个生命周期，因为双向绑定的value修改父组件状态需要时间，且是异步的\n                this.$nextTick(() => {\n                    this.$emit('change', oldValue);\n                });\n            }\n        }\n    }\n});\n//# sourceMappingURL=/Users/xyhc/Documents/carConnectInternet/uni_modules/uv-switch/components/uv-switch/uv-switch.vue?vue&type=script&lang.uts.js.map","references":["/Users/xyhc/Documents/carConnectInternet/uni_modules/uv-ui-tools/libs/mixin/mpMixin.js","/Users/xyhc/Documents/carConnectInternet/uni_modules/uv-ui-tools/libs/mixin/mixin.js","/Users/xyhc/Documents/carConnectInternet/uni_modules/uv-switch/components/uv-switch/props.js"],"uniExtApis":[],"map":"{\"version\":3,\"file\":\"uv-switch.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"uv-switch.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
