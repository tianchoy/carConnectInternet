{"code":"// 基础配置\nconst BASE_URL = 'https://your-api-domain.com'; // https base地址\nconst TIMEOUT = 5000; // 请求超时时间（ms）\nconst http = (url = null, method = 'GET', data = new UTSJSONObject({}), config = new UTSJSONObject({})) => {\n    return new Promise((resolve, reject) => {\n        // 请求拦截\n        const finalConfig = requestInterceptor(new UTSJSONObject(Object.assign({ url: `${BASE_URL}${url}`, method,\n            data, timeout: TIMEOUT, header: new UTSJSONObject(Object.assign({ 'Content-Type': 'application/json' }, config.header)) }, config)));\n        // 发起请求\n        uni.request(Object.assign(Object.assign({}, finalConfig), { success: (res) => {\n                uni.__f__('log', 'at api/http.uts:24', res);\n                // 响应拦截\n                try {\n                    const processedData = responseInterceptor(res);\n                    resolve(processedData);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }, fail: (err) => {\n                reject(err.errMsg || '网络错误');\n            } }));\n    });\n};\n// 请求拦截器\nconst requestInterceptor = (config = null) => {\n    // 添加Token\n    const token = uni.getStorageSync('token') || '';\n    if (token) {\n        config.header = config.header || new UTSJSONObject({});\n        config.header['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n};\n// 响应拦截器\nconst responseInterceptor = (response = null, config = null) => {\n    const statusCode = response.statusCode, data = response.data;\n    const url = config.url, method = config.method;\n    // HTTP状态码异常\n    if (statusCode < 200 || statusCode >= 300) {\n        uni.showToast({\n            title: `请求失败 (HTTP ${statusCode})`,\n            icon: 'none'\n        });\n        return Promise.reject(new UTSJSONObject({\n            type: 'http',\n            code: statusCode,\n            message: `[${method}] ${url} 请求失败 (HTTP ${statusCode})`,\n            original: response\n        }));\n    }\n    // 业务自定义错误码\n    if ((data === null || data === void 0 ? null : data.code) !== undefined && data.code !== 200) {\n        const error = new UTSJSONObject({\n            type: 'business',\n            code: data.code,\n            message: data.message || '业务逻辑错误',\n            original: data\n        });\n        // 特殊错误码处理（如Token过期）\n        if (data.code === 401) {\n            uni.reLaunch({ url: '/pages/login' });\n        }\n        return Promise.reject(error);\n    }\n    // 数据安全校验\n    if (config.needSignature && !validateDataSignature(data)) {\n        return Promise.reject(new UTSJSONObject({\n            type: 'security',\n            code: -300,\n            message: '数据签名验证失败'\n        }));\n    }\n    // 成功数据处理\n    return new UTSJSONObject(Object.assign(Object.assign({}, data), { _metadata: new UTSJSONObject({\n            timestamp: Date.now(),\n            api: url\n        }) }));\n};\nexport default http;\n//# sourceMappingURL=/Users/xyhc/Documents/carConnectInternet/api/http.uts.js.map","references":[],"uniExtApis":["uni.request","uni.__f__","uni.getStorageSync","uni.showToast","uni.reLaunch"],"map":"{\"version\":3,\"file\":\"http.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"http.uts\"],\"names\":[],\"mappings\":\"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\"}"}
