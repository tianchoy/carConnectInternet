{"version":3,"file":"carInfoDetail.js","sources":["pages/carInfoDetail/carInfoDetail.uvue","pages/carInfoDetail/carInfoDetail.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<custom-navBar title=\"详情\" :show-back=\"true\" backgroundColor=\"#fff\" textColor=\"#333\"\r\n\t\t\t@capsuleClick=\"handleCapsule\" :showCapsule=\"true\">\r\n\t\t</custom-navBar>\r\n\t\t<view class=\"map-container\">\r\n\t\t\t<!-- <MapComponent :center=\"center\" :mapScale=\"mapScale\" :polygons=\"polygons\" :markers=\"markers\"\r\n\t\t\t\t:polyline=\"polyline\" :isDrawing=\"isDrawing\" :currentMode=\"currentMode\" @map-tap=\"handleMapTap\"\r\n\t\t\t\t@marker-tap=\"handMarkerTap\" /> -->\r\n\t\t\t<map id=\"myMap\" :latitude=\"center.latitude\" :longitude=\"center.longitude\" :polygons=\"polygons\"\r\n\t\t\t\t:markers=\"markers\" :polyline=\"polyline\" :scale=\"mapScale\" @tap=\"handleMapTap\"\r\n\t\t\t\tstyle=\"width:100%;height:100%\" :show-location=\"true\" @markertap=\"handMarkerTap\">\r\n\t\t\t</map>\r\n\t\t\t<deviceInfoComponent :show-popup=\"showDevicePopup\" :device-info=\"currentDeviceInfo\"\r\n\t\t\t\t@close=\"closeDevicePopup\" />\r\n\t\t</view>\r\n\r\n\t\t<view class=\"tool-more\" @click=\"toggleMoreTools\">\r\n\t\t\t<image src=\"/static/icon-tool.png\" mode=\"aspectFit\" class=\"btn-tool-more-icon\"></image>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"tools-panel\" v-if=\"showMoreTools\">\r\n\t\t\t<uv-grid :col=\"4\" @click=\"click\">\r\n\t\t\t\t<uv-grid-item v-for=\"(item,index) in baseList\" :key=\"index\">\r\n\t\t\t\t\t<uv-icon :customStyle=\"{paddingTop:40+'rpx'}\" :name=\"item.name\" :size=\"56\"></uv-icon>\r\n\t\t\t\t\t<text class=\"grid-text\">{{item.title}}</text>\r\n\t\t\t\t</uv-grid-item>\r\n\t\t\t</uv-grid>\r\n\t\t\t<view class=\"h-line\"></view>\r\n\t\t\t<view v-if=\"currentToolItem == 4\">\r\n\t\t\t\t<view class=\"tool-tag-item\">\r\n\t\t\t\t\t<uv-button @click=\"startDrawing\" :disabled=\"isDrawing\">\r\n\t\t\t\t\t\t开始绘制\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t\t<uv-button @click=\"addPoint\" :disabled=\"!isDrawing\">\r\n\t\t\t\t\t\t添加当前点\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t\t<uv-button @click=\"finishDrawing\" :disabled=\"!isDrawing || points.length < 3\">\r\n\t\t\t\t\t\t完成绘制\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t\t<uv-button @click=\"clearAll\">\r\n\t\t\t\t\t\t重置\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"currentToolItem == 0\">\r\n\t\t\t\t<view class=\"tool-tag-item\">\r\n\t\t\t\t\t<uv-button @click=\"startPlayback\" :disabled=\"isPlaying\">\r\n\t\t\t\t\t\t开始回放\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t\t<uv-button @click=\"pausePlayback\" :disabled=\"!isPlaying\">\r\n\t\t\t\t\t\t暂停\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t\t<uv-button @click=\"clearTrack\">\r\n\t\t\t\t\t\t清除轨迹\r\n\t\t\t\t\t</uv-button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"speed-control\">\r\n\t\t\t\t\t<text class=\"speed-label\">回放速度: {{playbackSpeed}}x</text>\r\n\t\t\t\t\t<uv-slider class=\"slider\" v-model=\"playbackSpeed\" block-size=\"15\" block-color=\"red\" backgroundColor=\"pink\"\r\n\t\t\t\t\t\tactiveColor=\"blue\" min=\"1\" max=\"5\" @change=\"setPlaybackSpeed\">\r\n\t\t\t\t\t</uv-slider>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport amapFile from '../../utils/amap-wx.130'\r\n\r\n\tconst navBarHeight = ref(88); // 由组件实际高度决定\r\n\r\n\tconst handleCapsule = (type) => {\r\n\t\tif (type === 'close') {\r\n\t\t\tuni.navigateBack();\r\n\t\t} else {\r\n\t\t\tuni.showToast({ title: '菜单点击', icon: 'none' });\r\n\t\t}\r\n\t};\r\n\r\n\t// 地图状态\r\n\tconst center = reactive({\r\n\t\tlatitude: 39.90469,\r\n\t\tlongitude: 116.40717\r\n\t})\r\n\tconst mapScale = ref(12)\r\n\tconst showMoreTools = ref(true)\r\n\tconst carInFence = ref(false) // 车辆是否在围栏内\r\n\r\n\t// 电子围栏相关\r\n\tconst isDrawing = ref(false)\r\n\tconst points = ref<Array<{ latitude : number, longitude : number }>>([])\r\n\tconst polygons = ref<Array<any>>([])\r\n\tconst draggingIndex = ref(-1)   // 当前拖动的顶点索引\r\n\tconst isDragging = ref(false)   // 是否正在拖动\r\n\tconst originalPoints = ref<Array<{ latitude : number, longitude : number }>>([]) // 拖动前的点\r\n\r\n\t// 轨迹回放相关\r\n\tconst trackPoints = ref<Array<{ latitude : number, longitude : number, timestamp : number }>>([])\r\n\tconst polyline = ref<Array<any>>([])\r\n\tconst isPlaying = ref(false)\r\n\tconst playbackSpeed = ref(1) //轨迹回放速度\r\n\tconst totalDistance = ref(0)\r\n\tconst playbackInterval = ref<number | null>(null)\r\n\tconst currentIndex = ref(0)\r\n\tconst carMarker = ref<any>(null)\r\n\r\n\t//高德地图相关\r\n\tconst address = ref('')\r\n\tconst gdKey = 'e3e773ad74f7ba25f38775c9c8db6474'\r\n\tconst myAmapFun = ref()\r\n\r\n\t// 标记点集合\r\n\tconst markers = ref<Array<any>>([])\r\n\r\n\t// 控制弹窗显示\r\n\tconst showDevicePopup = ref(false)\r\n\tconst currentDeviceInfo = ref({\r\n\t\tdeviceName: '',\r\n\t\tcarNumber: '',\r\n\t\tdeviceSerial: '',\r\n\t\tlocationType: '',\r\n\t\tlngLat: '',\r\n\t\tupdateTime: '',\r\n\t\tlocationTime: '',\r\n\t\tspeed: '',\r\n\t\ttotalMileage: '',\r\n\t\taddress: ''\r\n\t})\r\n\r\n\tconst currentToolItem = ref(0)\r\n\tconst baseList = ref([{\r\n\t\tname: '/static/gjhf.png',\r\n\t\ttitle: '轨迹回放'\r\n\t}, {\r\n\t\tname: '/static/clgz.png',\r\n\t\ttitle: '车辆跟踪'\r\n\t}, {\r\n\t\tname: '/static/lcjl.png',\r\n\t\ttitle: '里程记录'\r\n\t}, {\r\n\t\tname: '/static/tcjl.png',\r\n\t\ttitle: '停车记录'\r\n\t}, {\r\n\t\tname: '/static/dzwl.png',\r\n\t\ttitle: '电子围栏'\r\n\t}\r\n\t])\r\n\r\n\tconst click = (name) => {\r\n\t\tcurrentToolItem.value = name\r\n\t}\r\n\t// 检测车辆是否在电子围栏内\r\n\tconst checkCarInFence = (point : { latitude : number, longitude : number }) => {\r\n\t\tif (polygons.value.length === 0 || polygons.value[0].points.length < 3) {\r\n\t\t\tcarInFence.value = false\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst polygon = polygons.value[0].points\r\n\t\tconst x = point.longitude\r\n\t\tconst y = point.latitude\r\n\r\n\t\tlet inside = false\r\n\t\tfor (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\r\n\t\t\tconst xi = polygon[i].longitude\r\n\t\t\tconst yi = polygon[i].latitude\r\n\t\t\tconst xj = polygon[j].longitude\r\n\t\t\tconst yj = polygon[j].latitude\r\n\r\n\t\t\tconst intersect = ((yi > y) !== (yj > y)) &&\r\n\t\t\t\t(x < (xj - xi) * (y - yi) / (yj - yi) + xi)\r\n\r\n\t\t\tif (intersect) inside = !inside\r\n\t\t}\r\n\r\n\t\tcarInFence.value = inside\r\n\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:179',`车辆位置: ${point.latitude.toFixed(6)}, ${point.longitude.toFixed(6)} - ${inside ? '在围栏内' : '在围栏外'}`)\r\n\t}\r\n\r\n\t// 初始化加载测试的电子围栏\r\n\tonMounted(async () => {\r\n\t\tmyAmapFun.value = new amapFile.AMapWX({ key: gdKey });\r\n\t\tawait getlocation() //获取当前位置\t\r\n\t\tawait loadPolygons() //加载默认电子围栏\r\n\t\tawait loadSampleTrack() //加载默认回放记录\r\n\t\tawait checkCarInFence(center) //检测车辆在不在围栏里\r\n\r\n\t})\r\n\r\n\t//获取当前位置\r\n\tconst getlocation = () => {\r\n\t\tuni.getLocation({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:196','当前坐标点：', res);\r\n\t\t\t\tcenter.latitude = res.latitude\r\n\t\t\t\tcenter.longitude = res.longitude\r\n\t\t\t\tgetRegeo(res.latitude, res.longitude)\r\n\t\t\t\t// 检测车辆位置\r\n\t\t\t\tcheckCarInFence({ latitude: res.latitude, longitude: res.longitude })\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst getRegeo = (latitude, longitude) => {\r\n\t\tmyAmapFun.value.getRegeo({\r\n\t\t\tlocation: `${longitude},${latitude}`,\r\n\t\t\tsuccess: (data) => {\r\n\t\t\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:210','获取地址信息:', data)\r\n\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\taddress.value = data[0].regeocodeData.formatted_address\r\n\t\t\t\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:213','地址信息:', address.value)\r\n\t\t\t\t\tmarkers.value = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\ticonPath: '/static/marker.png',\r\n\t\t\t\t\t\t\twidth: 40,\r\n\t\t\t\t\t\t\theight: 40,\r\n\t\t\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\t\t\tcontent: address.value,\r\n\t\t\t\t\t\t\t\tborderRadius: 5,\r\n\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t\tdisplay: 'ALWAYS'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({ title: '获取地址失败', icon: 'none' })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: err.errMsg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t//打开地图app跳转\r\n\tconst handMarkerTap = (e) => {\r\n\t\t// const mapContext = uni.createMapContext(\"myMap\", this); \r\n\t\t// mapContext.openMapApp({\r\n\t\t// \tlatitude: center.latitude,  \r\n\t\t// \tlongitude: center.longitude, \r\n\t\t// \tdestination: address.value, \r\n\t\t// \tsuccess(res) {\r\n\t\t// \t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:251','success!!', res);\r\n\t\t// \t},\r\n\t\t// \tfail(err) {\r\n\t\t// \t\tuni.showToast({\r\n\t\t// \t\t\ttitle: err.errMsg,\r\n\t\t// \t\t\ticon: 'none'\r\n\t\t// \t\t})\r\n\t\t// \t}\r\n\t\t// });\r\n\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:260','markertap event:', e)\r\n\r\n\t\t// 微信小程序返回的是markerId\r\n\t\tif (e.detail && e.detail.markerId !== undefined) {\r\n\t\t\tconst markerId = e.detail.markerId\r\n\t\t\tconst marker = markers.value.find(m => m.id === markerId)\r\n\r\n\t\t\tif (marker && marker.extData) {\r\n\t\t\t\tcurrentDeviceInfo.value = {\r\n\t\t\t\t\tdeviceName: marker.extData.deviceName || '',\r\n\t\t\t\t\tcarNumber: marker.extData.carNumber || '',\r\n\t\t\t\t\tdeviceSerial: marker.extData.deviceSerial || '',\r\n\t\t\t\t\tlocationType: marker.extData.locationType || '',\r\n\t\t\t\t\tlngLat: `${marker.extData.latitude},${marker.extData.longitude}` || '',\r\n\t\t\t\t\tupdateTime: marker.extData.updateTime || '',\r\n\t\t\t\t\tlocationTime: marker.extData.locationTime || '',\r\n\t\t\t\t\tspeed: marker.extData.speed || '',\r\n\t\t\t\t\ttotalMileage: marker.extData.totalMileage || '',\r\n\t\t\t\t\taddress: marker.extData.address || ''\r\n\t\t\t\t}\r\n\t\t\t\tshowDevicePopup.value = true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tuni.__f__('warn','at pages/carInfoDetail/carInfoDetail.uvue:285','无法获取标记点信息', e)\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '无法获取设备信息',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\t// 关闭弹窗\r\n\tconst closeDevicePopup = () => {\r\n\t\tshowDevicePopup.value = false\r\n\t}\r\n\r\n\tconst toggleMoreTools = () => {\r\n\t\tshowMoreTools.value = !showMoreTools.value\r\n\t}\r\n\t/* 电子围栏功能部分 */\r\n\tconst startDrawing = () => {\r\n\t\tisDrawing.value = true\r\n\t\tpoints.value = []\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst handleMapTap = (point : { latitude : number, longitude : number }) => {\r\n\t\taddNewPoint(point.detail.latitude, point.detail.longitude)\r\n\t}\r\n\r\n\tconst addPoint = () => {\r\n\t\taddNewPoint(center.latitude, center.longitude)\r\n\t}\r\n\r\n\tconst addNewPoint = (lat : number, lng : number) => {\r\n\t\tpoints.value.push({ latitude: lat, longitude: lng })\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst removePoint = (index : number) => {\r\n\t\tpoints.value.splice(index, 1)\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst finishDrawing = () => {\r\n\t\tif (points.value.length < 3) {\r\n\t\t\tuni.showToast({ title: '至少需要3个顶点', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\tisDrawing.value = false\r\n\t\tuni.showToast({ title: `围栏创建成功，共${points.value.length}个顶点` })\r\n\t\tuni.__f__('log','at pages/carInfoDetail/carInfoDetail.uvue:332','电子围栏坐标:', JSON.stringify(points.value))\r\n\r\n\t\tupdateFencePolygon()\r\n\t\tcheckCarInFence(center)\r\n\t}\r\n\r\n\tconst clearAll = () => {\r\n\t\tisDrawing.value = false\r\n\t\tpoints.value = []\r\n\t\tpolygons.value = []\r\n\t\tcarInFence.value = false\r\n\t\tisDragging.value = false\r\n\t\tdraggingIndex.value = -1\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst loadPolygons = () => {\r\n\t\tpolygons.value = [{\r\n\t\t\tpoints: [{ \"latitude\": 35.277849527708206, \"longitude\": 115.39025552959356 },\r\n\t\t\t{ \"latitude\": 35.22397928678945, \"longitude\": 115.37543744586583 },\r\n\t\t\t{ \"latitude\": 35.23341600978699, \"longitude\": 115.44904849298473 },\r\n\t\t\t{ \"latitude\": 35.279357522215726, \"longitude\": 115.45106784538075 }],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tstrokeColor: '#FF0000',\r\n\t\t\tfillColor: 'rgba(255,0,0,0.2)',\r\n\t\t\tzIndex: 1\r\n\t\t}]\r\n\t}\r\n\r\n\t// 更新围栏多边形显示\r\n\tfunction updateFencePolygon() {\r\n\t\tpolygons.value = [{\r\n\t\t\tpoints: points.value,\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tstrokeColor: isDragging.value ? '#00AA00' : '#FF0000', // 拖动时改变颜色\r\n\t\t\tfillColor: isDragging.value ? 'rgba(0,170,0,0.2)' : 'rgba(255,0,0,0.2)',\r\n\t\t\tzIndex: 1\r\n\t\t}]\r\n\t}\r\n\r\n\t/* 轨迹回放功能部分 */\r\n\tconst loadSampleTrack = () => {\r\n\t\t// 模拟测试轨迹数据\r\n\t\tconst mockTrack = [{ \"latitude\": 35.26677197770503, \"longitude\": 115.40126244387386 },\r\n\t\t{ \"latitude\": 35.23764782824115, \"longitude\": 115.39397562325496 },\r\n\t\t{ \"latitude\": 35.23905101311781, \"longitude\": 115.44459367195407 },\r\n\t\t{ \"latitude\": 35.270452534471225, \"longitude\": 115.44611973480175 },\r\n\t\t{ \"latitude\": 35.26677197770503, \"longitude\": 115.40126244387386 }]\r\n\r\n\t\ttrackPoints.value = mockTrack\r\n\t\tcalculateTrackDistance()\r\n\t\tupdatePolyline()\r\n\t}\r\n\r\n\t// 初始化小车标记\r\n\tconst initCarMarker = () => {\r\n\t\tif (trackPoints.value.length > 0 && !carMarker.value) {\r\n\t\t\tcarMarker.value = {\r\n\t\t\t\tid: 999,\r\n\t\t\t\tlatitude: trackPoints.value[0].latitude,\r\n\t\t\t\tlongitude: trackPoints.value[0].longitude,\r\n\t\t\t\ticonPath: '/static/car.png',\r\n\t\t\t\twidth: 32,\r\n\t\t\t\theight: 32,\r\n\t\t\t\tanchor: { x: 0.5, y: 0.5 }\r\n\t\t\t}\r\n\t\t\tmarkers.value = [carMarker.value]\r\n\t\t}\r\n\t}\r\n\r\n\t// 调整地图视野以适应轨迹\r\n\tconst adjustMapToFitTrack = () => {\r\n\t\tif (trackPoints.value.length === 0) return\r\n\r\n\t\tconst bounds = calculateTrackBounds()\r\n\t\tcenter.latitude = (bounds.minLat + bounds.maxLat) / 2\r\n\t\tcenter.longitude = (bounds.minLng + bounds.maxLng) / 2\r\n\r\n\t\t// 根据轨迹范围自动计算缩放级别\r\n\t\tconst latDiff = bounds.maxLat - bounds.minLat\r\n\t\tconst lngDiff = bounds.maxLng - bounds.minLng\r\n\t\tconst maxDiff = Math.max(latDiff, lngDiff)\r\n\r\n\t\tif (maxDiff > 0.1) mapScale.value = 11\r\n\t\telse if (maxDiff > 0.05) mapScale.value = 12\r\n\t\telse if (maxDiff > 0.02) mapScale.value = 13\r\n\t\telse mapScale.value = 14\r\n\t}\r\n\r\n\t// 计算轨迹边界\r\n\tconst calculateTrackBounds = () => {\r\n\t\tlet minLat = trackPoints.value[0].latitude\r\n\t\tlet maxLat = trackPoints.value[0].latitude\r\n\t\tlet minLng = trackPoints.value[0].longitude\r\n\t\tlet maxLng = trackPoints.value[0].longitude\r\n\r\n\t\ttrackPoints.value.forEach(point => {\r\n\t\t\tminLat = Math.min(minLat, point.latitude)\r\n\t\t\tmaxLat = Math.max(maxLat, point.latitude)\r\n\t\t\tminLng = Math.min(minLng, point.longitude)\r\n\t\t\tmaxLng = Math.max(maxLng, point.longitude)\r\n\t\t})\r\n\r\n\t\treturn { minLat, maxLat, minLng, maxLng }\r\n\t}\r\n\r\n\tconst calculateTrackDistance = () => {\r\n\t\ttotalDistance.value = 0\r\n\t\tfor (let i = 1; i < trackPoints.value.length; i++) {\r\n\t\t\ttotalDistance.value += getDistance(\r\n\t\t\t\ttrackPoints.value[i - 1].latitude,\r\n\t\t\t\ttrackPoints.value[i - 1].longitude,\r\n\t\t\t\ttrackPoints.value[i].latitude,\r\n\t\t\t\ttrackPoints.value[i].longitude\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\t// 计算两点间距离（米）\r\n\tconst getDistance = (lat1 : number, lng1 : number, lat2 : number, lng2 : number) => {\r\n\t\tconst rad = (d : number) => d * Math.PI / 180.0\r\n\t\tconst radLat1 = rad(lat1)\r\n\t\tconst radLat2 = rad(lat2)\r\n\t\tconst a = radLat1 - radLat2\r\n\t\tconst b = rad(lng1) - rad(lng2)\r\n\t\tconst s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\r\n\t\t\tMath.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)))\r\n\t\treturn s * 6378.137 * 1000\r\n\t}\r\n\r\n\tconst startPlayback = () => {\r\n\t\tif (trackPoints.value.length === 0) {\r\n\t\t\tuni.showToast({ title: '没有轨迹数据', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tisPlaying.value = true\r\n\t\tcurrentIndex.value = 0\r\n\t\tinitCarMarker()\r\n\r\n\t\t// 开始播放\r\n\t\tplaybackInterval.value = setInterval(playNextPoint, 1000 / playbackSpeed.value)\r\n\t}\r\n\r\n\tconst playNextPoint = () => {\r\n\t\tif (currentIndex.value >= trackPoints.value.length - 1) {\r\n\t\t\tpausePlayback()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tcurrentIndex.value++\r\n\t\tconst point = trackPoints.value[currentIndex.value]\r\n\r\n\t\t// 更新小车位置\r\n\t\tif (carMarker.value) {\r\n\t\t\tcarMarker.value.latitude = point.latitude\r\n\t\t\tcarMarker.value.longitude = point.longitude\r\n\t\t\tmarkers.value = [carMarker.value]\r\n\t\t}\r\n\r\n\t\t// 检测车辆位置\r\n\t\tcheckCarInFence(point)\r\n\t}\r\n\r\n\tconst pausePlayback = () => {\r\n\t\tisPlaying.value = false\r\n\t\tif (playbackInterval.value) {\r\n\t\t\tclearInterval(playbackInterval.value)\r\n\t\t\tplaybackInterval.value = null\r\n\t\t}\r\n\t}\r\n\r\n\t// 重置回放\r\n\tconst resetPlayback = () => {\r\n\t\tpausePlayback()\r\n\t\tcurrentIndex.value = 0\r\n\t\tupdatePolyline()\r\n\r\n\t\t// 重置小车位置\r\n\t\tif (trackPoints.value.length > 0) {\r\n\t\t\tinitCarMarker()\r\n\t\t\tif (carMarker.value) {\r\n\t\t\t\tcarMarker.value.latitude = trackPoints.value[0].latitude\r\n\t\t\t\tcarMarker.value.longitude = trackPoints.value[0].longitude\r\n\t\t\t\tmarkers.value = [carMarker.value]\r\n\t\t\t}\r\n\r\n\t\t\t// 检测车辆位置\r\n\t\t\tcheckCarInFence(trackPoints.value[0])\r\n\t\t}\r\n\t}\r\n\r\n\tconst clearTrack = () => {\r\n\t\tpausePlayback()\r\n\t\ttrackPoints.value = []\r\n\t\tpolyline.value = []\r\n\t\ttotalDistance.value = 0\r\n\t\tcarMarker.value = null\r\n\t\tmarkers.value = []\r\n\t\tcarInFence.value = false\r\n\t}\r\n\r\n\tconst setPlaybackSpeed = (e : any) => {\r\n\t\tplaybackSpeed.value = e\r\n\t\tif (isPlaying.value) {\r\n\t\t\tpausePlayback()\r\n\t\t\tstartPlayback()\r\n\t\t}\r\n\t}\r\n\r\n\tconst updatePolyline = () => {\r\n\t\tif (!trackPoints.value || trackPoints.value.length === 0) {\r\n\t\t\tpolyline.value = []\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tpolyline.value = [{\r\n\t\t\tpoints: trackPoints.value.map(p => ({ latitude: p.latitude, longitude: p.longitude })),\r\n\t\t\tcolor: '#1890FF',\r\n\t\t\twidth: 4,\r\n\t\t\tarrowLine: true,\r\n\t\t\tborderColor: '#FFF',\r\n\t\t\tborderWidth: 2\r\n\t\t}]\r\n\t}\r\n\r\n\t/* 通用地图更新方法 */\r\n\tconst updateMapDisplay = () => {\r\n\t\t// 更新标记点\r\n\t\tconst newMarkers = []\r\n\r\n\t\t// 添加围栏顶点标记\r\n\r\n\t\tnewMarkers.push(...points.value.map((point, index) => ({\r\n\t\t\tid: 1000 + index,  // 使用数字ID（1000+）\r\n\t\t\tlatitude: point.latitude,\r\n\t\t\tlongitude: point.longitude,\r\n\t\t\ticonPath: isDragging.value && index === draggingIndex.value\r\n\t\t\t\t? '/static/marker_active.png'\r\n\t\t\t\t: '/static/marker.png',\r\n\t\t\twidth: 32,\r\n\t\t\theight: 32,\r\n\t\t\tcallout: { content: `顶点${index + 1}`, display: 'ALWAYS' },\r\n\t\t\tdraggable: !isDrawing.value,  // 只有在绘制完成后才能拖动\r\n\t\t\tanchor: { x: 0.5, y: 0.5 }    // 设置锚点为中心\r\n\t\t})))\r\n\r\n\r\n\t\t// 添加车辆标记\r\n\t\tif (carMarker.value) {\r\n\t\t\tnewMarkers.push(carMarker.value)\r\n\t\t}\r\n\r\n\t\tmarkers.value = newMarkers\r\n\r\n\t\t// 更新围栏多边形\r\n\t\tif (points.value.length >= 3) {\r\n\t\t\tupdateFencePolygon()\r\n\t\t} else {\r\n\t\t\tpolygons.value = []\r\n\t\t}\r\n\r\n\t\t// 更新轨迹线\r\n\t\tupdatePolyline()\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #f5f7fa;\r\n\r\n\t\t.map-container {\r\n\t\t\tflex: 1;\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.drag-hint {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 20rpx;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tright: 0;\r\n\t\t\t\tz-index: 100;\r\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\t\t\tpadding: 16rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #00aa00;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t\t\t\tanimation: pulse 1.5s infinite;\r\n\t\t\t}\r\n\r\n\t\t\t@keyframes pulse {\r\n\t\t\t\t0% {\r\n\t\t\t\t\topacity: 0.7;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t50% {\r\n\t\t\t\t\topacity: 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t100% {\r\n\t\t\t\t\topacity: 0.7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.tool-nav {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 200rpx;\r\n\t\t\tright: 20rpx;\r\n\t\t\tz-index: 100;\r\n\r\n\t\t\t.btn-map-list {\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.btn-map-list-icon {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tpadding: 8rpx;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\tbackground-color: #69c2f1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.tool-more {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 30%;\r\n\t\t\tright: 20rpx;\r\n\t\t\tz-index: 100;\r\n\t\t\twidth: 60rpx;\r\n\t\t\theight: 60rpx;\r\n\r\n\t\t\t.btn-tool-more-icon {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.tools-panel {\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\t\r\n\t\t\t.h-line{\r\n\t\t\t\twidth: 90%;\r\n\t\t\t\theight: 2rpx;\r\n\t\t\t\tbackground-color: #f1f1f1;\r\n\t\t\t\tmargin: 50rpx auto 0;\r\n\t\t\t}\r\n\r\n\t\t\t.tool-tag-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 50rpx 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.speed-control {\r\n\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t.slider{\r\n\t\t\t\t\twidth: 90%;\r\n\t\t\t\t\tmargin: 0 auto;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.grid-text {\r\n\t\t\t\tpadding: 20rpx 0 0;\r\n\r\n\t\t\t\tbox-sizing: border-box;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/carConnectInternet/pages/carInfoDetail/carInfoDetail.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","reactive","onMounted","__awaiter","amapFile","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA8GC,MAAM,QAAQ;;;;AAvCOA,kBAAAA,IAAI,EAAE;AAE3B,UAAM,gBAAgB,CAAC,OAAI,SAAA;AAC1B,UAAI,SAAS,SAAS;AACrBC,sBAAG,MAAC,aAAY;AAAA,MAChB,OAAM;AACNA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,MAC7C;AAAA,IACF;AAGA,UAAM,SAASC,uBAAS,IAAA,cAAA;AAAA,MACvB,UAAU;AAAA,MACV,WAAW;AAAA,IACX,CAAA,CAAA;AACD,UAAM,WAAWF,kBAAI,EAAE;AACvB,UAAM,gBAAgBA,kBAAI,IAAI;AAC9B,UAAM,aAAaA,kBAAI,KAAK;AAG5B,UAAM,YAAYA,kBAAI,KAAK;AAC3B,UAAM,SAASA,kBAAsD,CAAA,CAAE;AACvE,UAAM,WAAWA,kBAAgB,CAAA,CAAE;AACnC,UAAM,gBAAgBA,cAAAA,IAAI,EAAE;AAC5B,UAAM,aAAaA,kBAAI,KAAK;AACLA,kBAAAA,IAAsD,CAAA,CAAE;AAG/E,UAAM,cAAcA,kBAA0E,CAAA,CAAE;AAChG,UAAM,WAAWA,kBAAgB,CAAA,CAAE;AACnC,UAAM,YAAYA,kBAAI,KAAK;AAC3B,UAAM,gBAAgBA,kBAAI,CAAC;AAC3B,UAAM,gBAAgBA,kBAAI,CAAC;AAC3B,UAAM,mBAAmBA,kBAAmB,IAAI;AAChD,UAAM,eAAeA,kBAAI,CAAC;AAC1B,UAAM,YAAYA,kBAAS,IAAI;AAG/B,UAAM,UAAUA,kBAAI,EAAE;AAEtB,UAAM,YAAYA,cAAAA;AAGlB,UAAM,UAAUA,kBAAgB,CAAA,CAAE;AAGlC,UAAM,kBAAkBA,kBAAI,KAAK;AACjC,UAAM,oBAAoBA,kBAAI,IAAA,cAAA;AAAA,MAC7B,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,cAAc;AAAA,MACd,cAAc;AAAA,MACd,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,OAAO;AAAA,MACP,cAAc;AAAA,MACd,SAAS;AAAA,IACT,CAAA,CAAA;AAED,UAAM,kBAAkBA,kBAAI,CAAC;AAC7B,UAAM,WAAWA,cAAAA,IAAI,CAAC,IAAA,cAAA;AAAA,MACrB,MAAM;AAAA,MACN,OAAO;AAAA,KACP,GAAE,IAAA,cAAA;AAAA,MACF,MAAM;AAAA,MACN,OAAO;AAAA,KACP,GAAE,IAAA,cAAA;AAAA,MACF,MAAM;AAAA,MACN,OAAO;AAAA,KACP,GAAE,IAAA,cAAA;AAAA,MACF,MAAM;AAAA,MACN,OAAO;AAAA,KACP,GAAE,IAAA,cAAA;AAAA,MACF,MAAM;AAAA,MACN,OAAO;AAAA,IACP,CAAA,CAAA,CACA;AAED,UAAM,QAAQ,CAAC,OAAI,SAAA;AAClB,sBAAgB,QAAQ;AAAA,IACzB;AAEA,UAAM,kBAAkB,CAAC,UAAiD;AACzE,UAAI,SAAS,MAAM,WAAW,KAAK,SAAS,MAAM,CAAC,EAAE,OAAO,SAAS,GAAG;AACvE,mBAAW,QAAQ;AACnB,eAAM;AAAA,MACN;AAED,YAAM,UAAU,SAAS,MAAM,CAAC,EAAE;AAClC,YAAM,IAAI,MAAM;AAChB,YAAM,IAAI,MAAM;AAEhB,UAAI,SAAS;AACb,eAAS,IAAI,GAAG,IAAI,QAAQ,SAAS,GAAG,IAAI,QAAQ,QAAQ,IAAI,KAAK;AACpE,cAAM,KAAK,QAAQ,CAAC,EAAE;AACtB,cAAM,KAAK,QAAQ,CAAC,EAAE;AACtB,cAAM,KAAK,QAAQ,CAAC,EAAE;AACtB,cAAM,KAAK,QAAQ,CAAC,EAAE;AAEtB,cAAM,YAAc,KAAK,MAAQ,KAAK,KACpC,KAAK,KAAK,OAAO,IAAI,OAAO,KAAK,MAAM;AAEzC,YAAI;AAAW,mBAAS,CAAC;AAAA,MACzB;AAED,iBAAW,QAAQ;AACnBC,0BAAI,MAAM,OAAM,iDAAgD,SAAS,MAAM,SAAS,QAAQ,CAAC,CAAC,KAAK,MAAM,UAAU,QAAQ,CAAC,CAAC,MAAM,SAAS,SAAS,MAAM,EAAE;AAAA,IAClK;AAGAE,kBAAS,UAAC,MAAA;AAAA,aAAAC,cAAA,UAAA,MAAA,QAAA,QAAA,aAAA;AACT,kBAAU,QAAQ,IAAIC,iBAAAA,SAAS,OAAO,IAAA,cAAA,EAAE,KAAK,MAAO,CAAA;AACpD,cAAM,YAAW;AACjB,cAAM,aAAY;AAClB,cAAM,gBAAe;AACrB,cAAM,gBAAgB,MAAM;AAAA,OAE5B;AAAA,IAAA,CAAA;AAGD,UAAM,cAAc,MAAA;AACnBJ,0BAAI,YAAY,IAAA,cAAA;AAAA,QACf,SAAS,CAAC,QAAG;AACZA,wBAAG,MAAC,MAAM,OAAM,iDAAgD,UAAU,GAAG;AAC7E,iBAAO,WAAW,IAAI;AACtB,iBAAO,YAAY,IAAI;AACvB,mBAAS,IAAI,UAAU,IAAI,SAAS;AAEpC,0BAAgB,EAAE,UAAU,IAAI,UAAU,WAAW,IAAI,UAAS,CAAE;AAAA,QACrE;AAAA,MACA,CAAA,CAAA;AAAA,IACF;AAEA,UAAM,WAAW,CAAC,WAAQ,MAAE,YAAS,SAAA;AACpC,gBAAU,MAAM,SAAS,IAAA,cAAA;AAAA,QACxB,UAAU,GAAG,SAAS,IAAI,QAAQ;AAAA,QAClC,SAAS,CAAC,OAAI,SAAA;AACbA,wBAAG,MAAC,MAAM,OAAM,iDAAgD,WAAW,IAAI;AAC/E,cAAI,KAAK,SAAS,GAAG;AACpB,oBAAQ,QAAQ,KAAK,CAAC,EAAE,cAAc;AACtCA,0BAAG,MAAC,MAAM,OAAM,iDAAgD,SAAS,QAAQ,KAAK;AACtF,oBAAQ,QAAQ;AAAA,cACf,IAAA,cAAA;AAAA,gBACC,IAAI;AAAA,gBACJ;AAAA,gBACA;AAAA,gBACA,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,SAAS,IAAA,cAAA;AAAA,kBACR,SAAS,QAAQ;AAAA,kBACjB,cAAc;AAAA,kBACd,SAAS;AAAA,kBACT,SAAS;AAAA,iBACT;AAAA,cACD,CAAA;AAAA;UAEF,OAAM;AACNA,0BAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,UAC/C;AAAA,QACD;AAAA,QACD,MAAM,CAAC,MAAG,SAAA;AACTA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI;AAAA,YACX,MAAM;AAAA,UACN,CAAA;AAAA,QACF;AAAA,MACA,CAAA,CAAA;AAAA,IACF;AAGA,UAAM,gBAAgB,CAAC,IAAC,SAAA;AAgBvBA,oBAAG,MAAC,MAAM,OAAM,iDAAgD,oBAAoB,CAAC;AAGrF,UAAI,EAAE,UAAU,EAAE,OAAO,aAAa,QAAW;AAChD,cAAM,WAAW,EAAE,OAAO;AAC1B,cAAM,SAAS,IAAA,UAAA,QAAQ,OAAW,CAAA,IAAC;AAAI,iBAAA,EAAE,OAAO;AAAA,QAAQ,CAAA;AAExD,YAAI,UAAU,OAAO,SAAS;AAC7B,4BAAkB,QAAQ;AAAA,YACzB,YAAY,OAAO,QAAQ,cAAc;AAAA,YACzC,WAAW,OAAO,QAAQ,aAAa;AAAA,YACvC,cAAc,OAAO,QAAQ,gBAAgB;AAAA,YAC7C,cAAc,OAAO,QAAQ,gBAAgB;AAAA,YAC7C,QAAQ,GAAG,OAAO,QAAQ,QAAQ,IAAI,OAAO,QAAQ,SAAS,MAAM;AAAA,YACpE,YAAY,OAAO,QAAQ,cAAc;AAAA,YACzC,cAAc,OAAO,QAAQ,gBAAgB;AAAA,YAC7C,OAAO,OAAO,QAAQ,SAAS;AAAA,YAC/B,cAAc,OAAO,QAAQ,gBAAgB;AAAA,YAC7C,SAAS,OAAO,QAAQ,WAAW;AAAA;AAEpC,0BAAgB,QAAQ;AACxB,iBAAM;AAAA,QACN;AAAA,MACD;AAEDA,oBAAG,MAAC,MAAM,QAAO,iDAAgD,aAAa,CAAC;AAC/EA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACN,CAAA;AAAA,IACF;AAGA,UAAM,mBAAmB,MAAA;AACxB,sBAAgB,QAAQ;AAAA,IACzB;AAEA,UAAM,kBAAkB,MAAA;AACvB,oBAAc,QAAQ,CAAC,cAAc;AAAA,IACtC;AAEA,UAAM,eAAe,MAAA;AACpB,gBAAU,QAAQ;AAClB,aAAO,QAAQ;AACf;IACD;AAEA,UAAM,eAAe,CAAC,UAAiD;AACtE,kBAAY,MAAM,OAAO,UAAU,MAAM,OAAO,SAAS;AAAA,IAC1D;AAEA,UAAM,WAAW,MAAA;AAChB,kBAAY,OAAO,UAAU,OAAO,SAAS;AAAA,IAC9C;AAEA,UAAM,cAAc,CAAC,KAAc,QAAY;AAC9C,aAAO,MAAM,KAAK,EAAE,UAAU,KAAK,WAAW,IAAG,CAAE;AACnD;IACD;AAOA,UAAM,gBAAgB,MAAA;AACrB,UAAI,OAAO,MAAM,SAAS,GAAG;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAM,CAAE;AACjD,eAAM;AAAA,MACN;AACD,gBAAU,QAAQ;AAClBA,oBAAAA,MAAI,UAAU,EAAE,OAAO,WAAW,OAAO,MAAM,MAAM,MAAK,CAAE;AAC5DA,oBAAAA,MAAI,MAAM,OAAM,iDAAgD,WAAW,IAAA,KAAK,UAAU,OAAO,KAAK,CAAC;AAEvG;AACA,sBAAgB,MAAM;AAAA,IACvB;AAEA,UAAM,WAAW,MAAA;AAChB,gBAAU,QAAQ;AAClB,aAAO,QAAQ;AACf,eAAS,QAAQ;AACjB,iBAAW,QAAQ;AACnB,iBAAW,QAAQ;AACnB,oBAAc,QAAQ;AACtB;IACD;AAEA,UAAM,eAAe,MAAA;AACpB,eAAS,QAAQ,CAAC,IAAA,cAAA;AAAA,QACjB,QAAQ,CAAC,IAAA,cAAA,EAAE,YAAY,oBAAoB,aAAa,mBAAkB,CAAE,qBAC5E,EAAE,YAAY,mBAAmB,aAAa,mBAAkB,CAAE,GAAA,IAAA,cAClE,EAAE,YAAY,mBAAmB,aAAa,mBAAoB,CAAA,qBAClE,EAAE,YAAY,oBAAoB,aAAa,mBAAoB,CAAA,CAAC;AAAA,QACpE,aAAa;AAAA,QACb,aAAa;AAAA,QACb,WAAW;AAAA,QACX,QAAQ;AAAA,MACR,CAAA,CAAA;AAAA,IACF;AAGA,aAAS,qBAAkB;AAC1B,eAAS,QAAQ,CAAC,IAAA,cAAA;AAAA,QACjB,QAAQ,OAAO;AAAA,QACf,aAAa;AAAA,QACb,aAAa,WAAW,QAAQ,YAAY;AAAA,QAC5C,WAAW,WAAW,QAAQ,sBAAsB;AAAA,QACpD,QAAQ;AAAA,MACR,CAAA,CAAA;AAAA,IACF;AAGA,UAAM,kBAAkB,MAAA;AAEvB,YAAM,YAAY,CAAA,IAAA,cAAC,EAAE,YAAY,mBAAmB,aAAa,mBAAoB,CAAA,qBACrF,EAAE,YAAY,mBAAmB,aAAa,oBAAoB,GAClE,IAAA,cAAA,EAAE,YAAY,mBAAmB,aAAa,oBAAoB,GAAA,IAAA,cAClE,EAAE,YAAY,oBAAoB,aAAa,mBAAkB,CAAE,GAAA,IAAA,cACnE,EAAE,YAAY,mBAAmB,aAAa,mBAAoB,CAAA,CAAA;AAElE,kBAAY,QAAQ;AACpB;AACA;IACD;AAGA,UAAM,gBAAgB,MAAA;AACrB,UAAI,YAAY,MAAM,SAAS,KAAK,CAAC,UAAU,OAAO;AACrD,kBAAU,QAAQ,IAAA,cAAA;AAAA,UACjB,IAAI;AAAA,UACJ,UAAU,YAAY,MAAM,CAAC,EAAE;AAAA,UAC/B,WAAW,YAAY,MAAM,CAAC,EAAE;AAAA,UAChC,UAAU;AAAA,UACV,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,QAAM,IAAA,cAAE,EAAE,GAAG,KAAK,GAAG,KAAK;AAAA,QAC1B,CAAA;AACD,gBAAQ,QAAQ,CAAC,UAAU,KAAK;AAAA,MAChC;AAAA,IACF;AAsCA,UAAM,yBAAyB,MAAA;AAC9B,oBAAc,QAAQ;AACtB,eAAS,IAAI,GAAG,IAAI,YAAY,MAAM,QAAQ,KAAK;AAClD,sBAAc,SAAS,YACtB,YAAY,MAAM,IAAI,CAAC,EAAE,UACzB,YAAY,MAAM,IAAI,CAAC,EAAE,WACzB,YAAY,MAAM,CAAC,EAAE,UACrB,YAAY,MAAM,CAAC,EAAE,SAAS;AAAA,MAE/B;AAAA,IACF;AAGA,UAAM,cAAc,CAAC,MAAe,MAAe,MAAe,SAAa;AAC9E,YAAM,MAAM,CAAC;AAAe,eAAA,IAAI,KAAK,KAAK;AAAA;AAC1C,YAAM,UAAU,IAAI,IAAI;AACxB,YAAM,UAAU,IAAI,IAAI;AACxB,YAAM,IAAI,UAAU;AACpB,YAAM,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI;AAC9B,YAAM,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,IAC5D,KAAK,IAAI,OAAO,IAAI,KAAK,IAAI,OAAO,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACtE,aAAO,IAAI,WAAW;AAAA,IACvB;AAEA,UAAM,gBAAgB,MAAA;AACrB,UAAI,YAAY,MAAM,WAAW,GAAG;AACnCA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAC/C,eAAM;AAAA,MACN;AAED,gBAAU,QAAQ;AAClB,mBAAa,QAAQ;AACrB;AAGA,uBAAiB,QAAQ,YAAY,eAAe,MAAO,cAAc,KAAK;AAAA,IAC/E;AAEA,UAAM,gBAAgB,MAAA;AACrB,UAAI,aAAa,SAAS,YAAY,MAAM,SAAS,GAAG;AACvD;AACA,eAAM;AAAA,MACN;AAED,mBAAa;AACb,YAAM,QAAQ,YAAY,MAAM,aAAa,KAAK;AAGlD,UAAI,UAAU,OAAO;AACpB,kBAAU,MAAM,WAAW,MAAM;AACjC,kBAAU,MAAM,YAAY,MAAM;AAClC,gBAAQ,QAAQ,CAAC,UAAU,KAAK;AAAA,MAChC;AAGD,sBAAgB,KAAK;AAAA,IACtB;AAEA,UAAM,gBAAgB,MAAA;AACrB,gBAAU,QAAQ;AAClB,UAAI,iBAAiB,OAAO;AAC3B,sBAAc,iBAAiB,KAAK;AACpC,yBAAiB,QAAQ;AAAA,MACzB;AAAA,IACF;AAsBA,UAAM,aAAa,MAAA;AAClB;AACA,kBAAY,QAAQ;AACpB,eAAS,QAAQ;AACjB,oBAAc,QAAQ;AACtB,gBAAU,QAAQ;AAClB,cAAQ,QAAQ;AAChB,iBAAW,QAAQ;AAAA,IACpB;AAEA,UAAM,mBAAmB,CAAC,IAAO,SAAA;AAChC,oBAAc,QAAQ;AACtB,UAAI,UAAU,OAAO;AACpB;AACA;MACA;AAAA,IACF;AAEA,UAAM,iBAAiB,MAAA;AACtB,UAAI,CAAC,YAAY,SAAS,YAAY,MAAM,WAAW,GAAG;AACzD,iBAAS,QAAQ;AACjB,eAAM;AAAA,MACN;AAED,eAAS,QAAQ,CAAC,IAAA,cAAA;AAAA,QACjB,QAAQ,YAAY,MAAM,IAAI,OAAC;AAAI,iBAAA,IAAA,cAAC,EAAE,UAAU,EAAE,UAAU,WAAW,EAAE,UAAS,CAAE;AAAA,SAAC;AAAA,QACrF,OAAO;AAAA,QACP,OAAO;AAAA,QACP,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACb,CAAA,CAAA;AAAA,IACF;AAGA,UAAM,mBAAmB,MAAA;AAExB,YAAM,aAAa,CAAA;AAInB,iBAAW,KAAK,GAAG,OAAO,MAAM,IAAI,CAAC,OAAO,UAAK;AAAK,eAAC,IAAA,cAAA;AAAA,UACtD,IAAI,MAAO;AAAA,UACX,UAAU,MAAM;AAAA,UAChB,WAAW,MAAM;AAAA,UACjB,UAAU,WAAW,SAAS,UAAU,cAAc,QACnD,8BACA;AAAA,UACH,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,SAAS,IAAA,cAAA,EAAE,SAAS,KAAK,QAAQ,CAAC,IAAI,SAAS,SAAQ,CAAE;AAAA,UACzD,WAAW,CAAC,UAAU;AAAA,UACtB,QAAQ,IAAA,cAAA,EAAE,GAAG,KAAK,GAAG,KAAK;AAAA;AAAA,QAC1B,CAAA;AAAA,MAAC,CAAA,CAAC;AAIH,UAAI,UAAU,OAAO;AACpB,mBAAW,KAAK,UAAU,KAAK;AAAA,MAC/B;AAED,cAAQ,QAAQ;AAGhB,UAAI,OAAO,MAAM,UAAU,GAAG;AAC7B;MACA,OAAM;AACN,iBAAS,QAAQ;MACjB;AAGD;IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACllBD,GAAG,WAAWK,SAAe;"}