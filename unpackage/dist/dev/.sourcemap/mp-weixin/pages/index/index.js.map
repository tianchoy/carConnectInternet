{"version":3,"file":"index.js","sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 地图容器 -->\n    <view class=\"mapBox\">\n    \t<map id=\"fenceMap\" :latitude=\"center.latitude\" :longitude=\"center.longitude\" :polygons=\"polygons\"\n    \t  :markers=\"markers\" :polyline=\"polyline\" :scale=\"mapScale\" @tap=\"handleMapTap\" style=\"width:100%;height:100%\"\n    \t  show-location></map>\n    </view>\n\n    <!-- 操作按钮组 -->\n    <view class=\"control-panel\">\n      <button @click=\"toggleMode\" :type=\"currentMode === 'draw' ? 'primary' : 'default'\">\n        {{ currentMode === 'draw' ? '绘制模式' : '轨迹模式' }}\n      </button>\n\t\t<button @click=\"getlocation\">获取当前位置</button>\n      <template v-if=\"currentMode === 'draw'\">\n        <button @click=\"startDrawing\" :disabled=\"isDrawing\" type=\"primary\">开始绘制</button>\n        <button @click=\"addPoint\" :disabled=\"!isDrawing\" type=\"primary\">添加当前点</button>\n        <button @click=\"finishDrawing\" :disabled=\"!isDrawing || points.length < 3\" type=\"warn\">完成绘制</button>\n        <button @click=\"clearAll\" type=\"default\">重置</button>\n      </template>\n\n      <template v-else>\n        <button @click=\"startPlayback\" :disabled=\"isPlaying\" type=\"primary\">开始回放</button>\n        <button @click=\"pausePlayback\" :disabled=\"!isPlaying\" type=\"warn\">暂停</button>\n        <button @click=\"clearTrack\" type=\"default\">清除轨迹</button>\n        <slider :value=\"playbackSpeed\" min=\"1\" max=\"5\" @change=\"setPlaybackSpeed\" show-value />\n      </template>\n    </view>\n\n    <!-- 坐标点列表/轨迹信息 -->\n    <view class=\"info-panel\">\n      <view v-if=\"currentMode === 'draw' && points.length > 0\" class=\"point-list\">\n        <view class=\"section-title\">围栏顶点 ({{points.length}}个)</view>\n        <scroll-view scroll-y style=\"max-height: 150px;\">\n          <view class=\"point-item\" v-for=\"(point, index) in points\" :key=\"index\">\n            <text>顶点{{index + 1}}: {{point.latitude.toFixed(6)}}, {{point.longitude.toFixed(6)}}</text>\n            <button @click=\"removePoint(index)\" size=\"mini\">删除</button>\n          </view>\n        </scroll-view>\n      </view>\n\n      <view v-else class=\"track-info\">\n        <view class=\"section-title\">轨迹信息</view>\n        <text>总点数: {{trackPoints.length}}</text>\n        <text>行驶距离: {{(totalDistance/1000).toFixed(2)}} km</text>\n        <text>回放速度: {{playbackSpeed}}x</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\n  // 地图状态\n  const center = reactive({\n    latitude: 39.90469,\n    longitude: 116.40717\n  })\n  const mapScale = ref(13)\n  const currentMode = ref<'draw' | 'track'>('draw')\n\n  // 电子围栏相关\n  const isDrawing = ref(false)\n  const points = ref<Array<{ latitude: number, longitude: number }>>([])\n  const polygons = ref<Array<any>>([])\n\n  // 轨迹回放相关\n  const trackPoints = ref<Array<{ latitude: number, longitude: number, timestamp: number }>>([])\n  const polyline = ref<Array<any>>([])\n  const isPlaying = ref(false)\n  const playbackSpeed = ref(50)\n  const totalDistance = ref(0)\n  const playbackInterval = ref<number | null>(null)\n  const currentIndex = ref(0)\n  const carMarker = ref<any>(null)\n\n  // 标记点集合\n  const markers = ref<Array<any>>([])\n\n  // 高德地图实例\n  const amapFile = require('../../static/libs/amap-wx.130.js')\n  const amap = amapFile.AMapWX({ key: 'e3e773ad74f7ba25f38775c9c8db6474' })\n\n  // 初始化加载测试轨迹\n  onMounted(() => {\n    loadSampleTrack()\n    polygons.value = [{\n      points: [\n        {latitude: 39.911224745973904, longitude: 116.4004448639945},\n        {latitude: 39.90158231816865, longitude: 116.39965115224538},\n        {latitude: 39.90225756812269, longitude: 116.4126210618266},\n        {latitude: 39.910544072055366, longitude: 116.41189424747824}\n      ],\n      strokeWidth: 2,\n      strokeColor: '#FF0000',\n      fillColor: 'rgba(255,0,0,0.2)',\n      zIndex: 1\n    }]\n  })\n  \n  onLoad(() => {\n\t  getlocation()\n  })\n  \n  //获取当前位置\n  const getlocation = () =>{\n\t  uni.getLocation({\n\t  \tsuccess: (res) => {\n\t  \t\tuni.__f__('log','at pages/index/index.uvue:109',res)\n\t\t\tcenter.latitude = res.latitude\n\t\t\tcenter.longitude = res.longitude\n\t  \t}\n\t  })\n  }\n\n  // 切换模式\n  const toggleMode = () => {\n    currentMode.value = currentMode.value === 'draw' ? 'track' : 'draw'\n    if (currentMode.value === 'track') {\n      initCarMarker()\n      resetPlayback()\n      adjustMapToFitTrack()\n    }\n  }\n\n  // 初始化小车标记\n  const initCarMarker = () => {\n    if (trackPoints.value.length > 0 && !carMarker.value) {\n      carMarker.value = {\n        id: 999,\n        latitude: trackPoints.value[0].latitude,\n        longitude: trackPoints.value[0].longitude,\n        iconPath: '/static/car.png',\n        width: 32,\n        height: 32,\n        anchor: { x: 0.5, y: 0.5 }\n      }\n      markers.value = [carMarker.value]\n    }\n  }\n\n  // 调整地图视野以适应轨迹\n  const adjustMapToFitTrack = () => {\n    if (trackPoints.value.length === 0) return\n    \n    const bounds = calculateTrackBounds()\n    center.latitude = (bounds.minLat + bounds.maxLat) / 2\n    center.longitude = (bounds.minLng + bounds.maxLng) / 2\n    \n    // 根据轨迹范围自动计算合适的缩放级别\n    const latDiff = bounds.maxLat - bounds.minLat\n    const lngDiff = bounds.maxLng - bounds.minLng\n    const maxDiff = Math.max(latDiff, lngDiff)\n    \n    if (maxDiff > 0.1) mapScale.value = 11\n    else if (maxDiff > 0.05) mapScale.value = 12\n    else if (maxDiff > 0.02) mapScale.value = 13\n    else mapScale.value = 14\n  }\n\n  // 计算轨迹边界\n  const calculateTrackBounds = () => {\n    let minLat = trackPoints.value[0].latitude\n    let maxLat = trackPoints.value[0].latitude\n    let minLng = trackPoints.value[0].longitude\n    let maxLng = trackPoints.value[0].longitude\n    \n    trackPoints.value.forEach(point => {\n      minLat = Math.min(minLat, point.latitude)\n      maxLat = Math.max(maxLat, point.latitude)\n      minLng = Math.min(minLng, point.longitude)\n      maxLng = Math.max(maxLng, point.longitude)\n    })\n    \n    return { minLat, maxLat, minLng, maxLng }\n  }\n\n  /* 电子围栏功能部分 */\n  const startDrawing = () => {\n    isDrawing.value = true\n    points.value = []\n    updateMapDisplay()\n  }\n\n  const handleMapTap = (e: any) => {\n    if (!isDrawing.value || currentMode.value !== 'draw') return\n    addNewPoint(e.detail.latitude, e.detail.longitude)\n  }\n\n  const addPoint = () => {\n    uni.createSelectorQuery()\n      .select('#fenceMap')\n      .context((res: any) => {\n        const mapContext = res.context\n        mapContext.getCenterLocation({\n          success: (centerRes: any) => {\n            addNewPoint(centerRes.latitude, centerRes.longitude)\n          }\n        })\n      })\n      .exec()\n  }\n\n  const addNewPoint = (lat: number, lng: number) => {\n    points.value.push({ latitude: lat, longitude: lng })\n    updateMapDisplay()\n  }\n\n  const removePoint = (index: number) => {\n    points.value.splice(index, 1)\n    updateMapDisplay()\n  }\n\n  const finishDrawing = () => {\n    if (points.value.length < 3) {\n      uni.showToast({ title: '至少需要3个顶点', icon: 'none' })\n      return\n    }\n    isDrawing.value = false\n    uni.showToast({ title: `围栏创建成功，共${points.value.length}个顶点` })\n    uni.__f__('log','at pages/index/index.uvue:221','电子围栏坐标:', JSON.stringify(points.value))\n  }\n\n  const clearAll = () => {\n    isDrawing.value = false\n    points.value = []\n    polygons.value = []\n    updateMapDisplay()\n  }\n\n  /* 轨迹回放功能部分 */\n  const loadSampleTrack = () => {\n    // 模拟生成测试轨迹数据\n    const mockTrack = []\n    const baseLat = 39.90469\n    const baseLng = 116.40717\n\n    for (let i = 0; i < 50; i++) {\n      mockTrack.push({\n        latitude: baseLat + Math.sin(i / 10) * 0.01,\n        longitude: baseLng + Math.cos(i / 10) * 0.01,\n        timestamp: Date.now() - (50 - i) * 60000\n      })\n    }\n\n    trackPoints.value = mockTrack\n    calculateTrackDistance()\n    updatePolyline()\n  }\n\n  const calculateTrackDistance = () => {\n    totalDistance.value = 0\n    for (let i = 1; i < trackPoints.value.length; i++) {\n      totalDistance.value += getDistance(\n        trackPoints.value[i - 1].latitude,\n        trackPoints.value[i - 1].longitude,\n        trackPoints.value[i].latitude,\n        trackPoints.value[i].longitude\n      )\n    }\n  }\n\n  // 计算两点间距离（米）\n  const getDistance = (lat1: number, lng1: number, lat2: number, lng2: number) => {\n    const rad = (d: number) => d * Math.PI / 180.0\n    const radLat1 = rad(lat1)\n    const radLat2 = rad(lat2)\n    const a = radLat1 - radLat2\n    const b = rad(lng1) - rad(lng2)\n    const s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\n      Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)))\n    return s * 6378.137 * 1000\n  }\n\n  const startPlayback = () => {\n    if (trackPoints.value.length === 0) {\n      uni.showToast({ title: '没有轨迹数据', icon: 'none' })\n      return\n    }\n\n    isPlaying.value = true\n    currentIndex.value = 0\n\n    // 确保小车标记已初始化\n    initCarMarker()\n\n    // 开始播放\n    playbackInterval.value = setInterval(playNextPoint, 1000 / playbackSpeed.value)\n  }\n\n  const playNextPoint = () => {\n    if (currentIndex.value >= trackPoints.value.length - 1) {\n      pausePlayback()\n      return\n    }\n\n    currentIndex.value++\n    const point = trackPoints.value[currentIndex.value]\n\n    // 只更新小车位置，不更新地图中心\n    if (carMarker.value) {\n      carMarker.value.latitude = point.latitude\n      carMarker.value.longitude = point.longitude\n      markers.value = [carMarker.value]\n    }\n  }\n\n  const pausePlayback = () => {\n    isPlaying.value = false\n    if (playbackInterval.value) {\n      clearInterval(playbackInterval.value)\n      playbackInterval.value = null\n    }\n  }\n\n  // 重置回放\n  const resetPlayback = () => {\n    pausePlayback()\n    currentIndex.value = 0\n    updatePolyline()\n    \n    // 安全地重置小车位置\n    if (trackPoints.value.length > 0) {\n      initCarMarker()\n      if (carMarker.value) {\n        carMarker.value.latitude = trackPoints.value[0].latitude\n        carMarker.value.longitude = trackPoints.value[0].longitude\n        markers.value = [carMarker.value]\n      }\n    }\n  }\n\n  const clearTrack = () => {\n    pausePlayback()\n    trackPoints.value = []\n    polyline.value = []\n    totalDistance.value = 0\n    carMarker.value = null\n    markers.value = []\n  }\n\n  const setPlaybackSpeed = (e: any) => {\n    playbackSpeed.value = e.detail.value\n    if (isPlaying.value) {\n      pausePlayback()\n      startPlayback()\n    }\n  }\n\n  const updatePolyline = () => {\n    if (!trackPoints.value || trackPoints.value.length === 0) {\n      polyline.value = []\n      return\n    }\n\n    polyline.value = [{\n      points: trackPoints.value.map(p => ({ latitude: p.latitude, longitude: p.longitude })),\n      color: '#1890FF',\n      width: 4,\n      arrowLine: true,\n      borderColor: '#FFF',\n      borderWidth: 2\n    }]\n  }\n\n  /* 通用地图更新方法 */\n  const updateMapDisplay = () => {\n    // 更新标记点\n    const newMarkers = []\n\n    // 添加围栏顶点标记\n    if (currentMode.value === 'draw') {\n      newMarkers.push(...points.value.map((point, index) => ({\n        id: index + 1,\n        latitude: point.latitude,\n        longitude: point.longitude,\n        iconPath: '/static/marker.png',\n        width: 20,\n        height: 20,\n        callout: { content: `顶点${index + 1}`, display: 'ALWAYS' }\n      })))\n    }\n\n    // 添加车辆标记\n    if (carMarker.value) {\n      newMarkers.push(carMarker.value)\n    }\n\n    markers.value = newMarkers\n\n    // 更新围栏多边形\n    if (currentMode.value === 'draw' && points.value.length >= 3) {\n      polygons.value = [{\n        points: points.value,\n        strokeWidth: 2,\n        strokeColor: '#FF0000',\n        fillColor: 'rgba(255,0,0,0.2)',\n        zIndex: 1\n      }]\n    } else {\n      polygons.value = []\n    }\n\n    // 更新轨迹线\n    if (currentMode.value === 'track') {\n      updatePolyline()\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  .container {\n    position: relative;\n\twidth: 100%;\n    height: 100%;\n\t.mapBox{\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 1;\n\t}\n  }\n\n  #fenceMap {\n    flex: 1;\n  }\n\n  .control-panel {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 10rpx;\n    gap: 10rpx;\n\tposition: absolute;\n\tz-index: 2;\n    button {\n      flex: 1;\n      min-width: 150rpx;\n      font-size: 28rpx;\n    }\n\n    slider {\n      width: 100%;\n      margin: 10rpx 0;\n    }\n  }\n\n  .info-panel {\n    padding: 20rpx;\n    background-color: #f5f5f5;\n\tposition: absolute;\n\tz-index: 2;\n    .section-title {\n      font-weight: bold;\n      margin-bottom: 10rpx;\n      color: #333;\n    }\n\n    .point-list {\n\t\tposition: absolute;\n\t\tz-index: 2;\n      scroll-view {\n        background-color: #fff;\n        border-radius: 8rpx;\n        padding: 10rpx;\n      }\n\n      .point-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 15rpx 0;\n        border-bottom: 1rpx solid #eee;\n\n        text {\n          font-size: 26rpx;\n          color: #333;\n        }\n\n        button {\n          margin: 0;\n          padding: 0 20rpx;\n          height: 50rpx;\n          line-height: 50rpx;\n        }\n      }\n    }\n\n    .track-info {\n      display: flex;\n      flex-direction: column;\n      gap: 10rpx;\n\n      text {\n        font-size: 26rpx;\n        color: #333;\n      }\n    }\n  }\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/carConnectInternet/pages/index/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onMounted","onLoad","uni","MiniProgramPage"],"mappings":"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"}