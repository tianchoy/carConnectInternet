{"version":3,"file":"index.js","sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 地图组件 -->\r\n\t\t<MapComponent :center=\"center\" :mapScale=\"mapScale\" :polygons=\"polygons\" :markers=\"markers\" :polyline=\"polyline\"\r\n\t\t\t:isDrawing=\"isDrawing\" :currentMode=\"currentMode\" @map-tap=\"handleMapTap\" />\r\n\r\n\t\t<!-- 操作按钮组 -->\r\n\t\t<view class=\"control-panel\">\r\n\t\t\t<button @click=\"toggleMode\" :type=\"currentMode === 'draw' ? 'primary' : 'default'\">\r\n\t\t\t\t{{ currentMode === 'draw' ? '绘制模式' : '轨迹模式' }}\r\n\t\t\t</button>\r\n\t\t\t<button @click=\"getlocation\">获取当前位置</button>\r\n\r\n\t\t\t<template v-if=\"currentMode === 'draw'\">\r\n\t\t\t\t<button @click=\"startDrawing\" :disabled=\"isDrawing\" type=\"primary\">开始绘制</button>\r\n\t\t\t\t<button @click=\"addPoint\" :disabled=\"!isDrawing\" type=\"primary\">添加当前点</button>\r\n\t\t\t\t<button @click=\"finishDrawing\" :disabled=\"!isDrawing || points.length < 3\" type=\"warn\">完成绘制</button>\r\n\t\t\t\t<button @click=\"clearAll\" type=\"default\">重置</button>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-else>\r\n\t\t\t\t<button @click=\"startPlayback\" :disabled=\"isPlaying\" type=\"primary\">开始回放</button>\r\n\t\t\t\t<button @click=\"pausePlayback\" :disabled=\"!isPlaying\" type=\"warn\">暂停</button>\r\n\t\t\t\t<button @click=\"clearTrack\" type=\"default\">清除轨迹</button>\r\n\t\t\t\t<slider :value=\"playbackSpeed\" min=\"1\" max=\"5\" @change=\"setPlaybackSpeed\" show-value />\r\n\t\t\t</template>\r\n\t\t</view>\r\n\r\n\t\t<!-- 坐标点列表/轨迹信息 -->\r\n\t\t<view class=\"info-panel\">\r\n\t\t\t<view v-if=\"currentMode === 'draw' && points.length > 0\" class=\"point-list\">\r\n\t\t\t\t<view class=\"section-title\">围栏顶点 ({{points.length}}个)</view>\r\n\t\t\t\t<scroll-view scroll-y style=\"max-height: 150px;\">\r\n\t\t\t\t\t<view class=\"point-item\" v-for=\"(point, index) in points\" :key=\"index\">\r\n\t\t\t\t\t\t<text>顶点{{index + 1}}: {{point.latitude.toFixed(6)}}, {{point.longitude.toFixed(6)}}</text>\r\n\t\t\t\t\t\t<button @click=\"removePoint(index)\" size=\"mini\">删除</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-else class=\"track-info\">\r\n\t\t\t\t<view class=\"section-title\">轨迹信息</view>\r\n\t\t\t\t<text>总点数: {{trackPoints.length}}</text>\r\n\t\t\t\t<text>行驶距离: {{(totalDistance/1000).toFixed(2)}} km</text>\r\n\t\t\t\t<text>回放速度: {{playbackSpeed}}x</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\timport { ref, reactive, onMounted } from 'vue'\r\n\timport { getUserInfo } from '../../api/request.uts'\r\n\timport MapComponent from '../../components/MapComponent/MapComponent.uvue'\r\n\r\n\t// 地图状态\r\n\tconst center = reactive({\r\n\t\tlatitude: 39.90469,\r\n\t\tlongitude: 116.40717\r\n\t})\r\n\tconst mapScale = ref(13)\r\n\tconst currentMode = ref<'draw' | 'track'>('draw')\r\n\r\n\t// 电子围栏相关\r\n\tconst isDrawing = ref(false)\r\n\tconst points = ref<Array<{ latitude : number, longitude : number }>>([])\r\n\tconst polygons = ref<Array<any>>([])\r\n\r\n\t// 轨迹回放相关\r\n\tconst trackPoints = ref<Array<{ latitude : number, longitude : number, timestamp : number }>>([])\r\n\tconst polyline = ref<Array<any>>([])\r\n\tconst isPlaying = ref(false)\r\n\tconst playbackSpeed = ref(1) //轨迹回放速度\r\n\tconst totalDistance = ref(0)\r\n\tconst playbackInterval = ref<number | null>(null)\r\n\tconst currentIndex = ref(0)\r\n\tconst carMarker = ref<any>(null)\r\n\r\n\t// 标记点集合\r\n\tconst markers = ref<Array<any>>([])\r\n\r\n\t// 初始化加载测试轨迹\r\n\tonMounted(() => {\r\n\t\tgetlocation()\r\n\t\tloadSampleTrack()\r\n\t\tpolygons.value = [{\r\n\t\t\tpoints: [{ \"latitude\": 35.26677197770503, \"longitude\": 115.40126244387386 }, \n\t\t\t{ \"latitude\": 35.23764782824115, \"longitude\": 115.39397562325496 },\n\t\t\t{ \"latitude\": 35.23905101311781, \"longitude\": 115.44459367195407 }, \n\t\t\t{ \"latitude\": 35.270452534471225, \"longitude\": 115.44611973480175 }],\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\tstrokeColor: '#FF0000',\r\n\t\t\tfillColor: 'rgba(255,0,0,0.2)',\r\n\t\t\tzIndex: 1\r\n\t\t}]\r\n\t})\r\n\r\n\t//获取当前位置\r\n\tconst getlocation = () => {\r\n\t\tuni.getLocation({\r\n\t\t\tsuccess: (res) => {\n\t\t\t\tuni.__f__('log','at pages/index/index.uvue:102','当前坐标点：',res);\r\n\t\t\t\tcenter.latitude = res.latitude\r\n\t\t\t\tcenter.longitude = res.longitude\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 切换模式\r\n\tconst toggleMode = () => {\r\n\t\tcurrentMode.value = currentMode.value === 'draw' ? 'track' : 'draw'\r\n\t\tif (currentMode.value === 'track') {\r\n\t\t\tinitCarMarker()\r\n\t\t\tresetPlayback()\r\n\t\t\tadjustMapToFitTrack()\r\n\t\t}\r\n\t}\r\n\r\n\t/* 电子围栏功能部分 */\r\n\tconst startDrawing = () => {\r\n\t\tisDrawing.value = true\r\n\t\tpoints.value = []\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst handleMapTap = (point : { latitude : number, longitude : number }) => {\r\n\t\tif (!isDrawing.value || currentMode.value !== 'draw') return\r\n\t\taddNewPoint(point.latitude, point.longitude)\r\n\t}\r\n\r\n\tconst addPoint = () => {\r\n\t\taddNewPoint(center.latitude, center.longitude)\r\n\t}\r\n\r\n\tconst addNewPoint = (lat : number, lng : number) => {\r\n\t\tpoints.value.push({ latitude: lat, longitude: lng })\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst removePoint = (index : number) => {\r\n\t\tpoints.value.splice(index, 1)\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\tconst finishDrawing = () => {\r\n\t\tif (points.value.length < 3) {\r\n\t\t\tuni.showToast({ title: '至少需要3个顶点', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\tisDrawing.value = false\r\n\t\tuni.showToast({ title: `围栏创建成功，共${points.value.length}个顶点` })\r\n\t\tuni.__f__('log','at pages/index/index.uvue:152','电子围栏坐标:', JSON.stringify(points.value))\r\n\t}\r\n\r\n\tconst clearAll = () => {\r\n\t\tisDrawing.value = false\r\n\t\tpoints.value = []\r\n\t\tpolygons.value = []\r\n\t\tupdateMapDisplay()\r\n\t}\r\n\r\n\t/* 轨迹回放功能部分 */\r\n\tconst loadSampleTrack = () => {\r\n\t\t// 模拟测试轨迹数据\r\n\t\tconst mockTrack = [{ \"latitude\": 35.26677197770503, \"longitude\": 115.40126244387386 }, \n\t\t\t{ \"latitude\": 35.23764782824115, \"longitude\": 115.39397562325496 },\n\t\t\t{ \"latitude\": 35.23905101311781, \"longitude\": 115.44459367195407 }, \n\t\t\t{ \"latitude\": 35.270452534471225, \"longitude\": 115.44611973480175 },\n\t\t\t{ \"latitude\": 35.26677197770503, \"longitude\": 115.40126244387386 }]\r\n\r\n\r\n\t\ttrackPoints.value = mockTrack\r\n\t\tcalculateTrackDistance()\r\n\t\tupdatePolyline()\r\n\t}\r\n\r\n\t// 初始化小车标记\r\n\tconst initCarMarker = () => {\r\n\t\tif (trackPoints.value.length > 0 && !carMarker.value) {\r\n\t\t\tcarMarker.value = {\r\n\t\t\t\tid: 999,\r\n\t\t\t\tlatitude: trackPoints.value[0].latitude,\r\n\t\t\t\tlongitude: trackPoints.value[0].longitude,\r\n\t\t\t\ticonPath: '/static/car.png',\r\n\t\t\t\twidth: 32,\r\n\t\t\t\theight: 32,\r\n\t\t\t\tanchor: { x: 0.5, y: 0.5 }\r\n\t\t\t}\r\n\t\t\tmarkers.value = [carMarker.value]\r\n\t\t}\r\n\t}\r\n\r\n\t// 调整地图视野以适应轨迹\r\n\tconst adjustMapToFitTrack = () => {\r\n\t\tif (trackPoints.value.length === 0) return\r\n\r\n\t\tconst bounds = calculateTrackBounds()\r\n\t\tcenter.latitude = (bounds.minLat + bounds.maxLat) / 2\r\n\t\tcenter.longitude = (bounds.minLng + bounds.maxLng) / 2\r\n\r\n\t\t// 根据轨迹范围自动计算缩放级别\r\n\t\tconst latDiff = bounds.maxLat - bounds.minLat\r\n\t\tconst lngDiff = bounds.maxLng - bounds.minLng\r\n\t\tconst maxDiff = Math.max(latDiff, lngDiff)\r\n\r\n\t\tif (maxDiff > 0.1) mapScale.value = 11\r\n\t\telse if (maxDiff > 0.05) mapScale.value = 12\r\n\t\telse if (maxDiff > 0.02) mapScale.value = 13\r\n\t\telse mapScale.value = 14\r\n\t}\r\n\r\n\t// 计算轨迹边界\r\n\tconst calculateTrackBounds = () => {\r\n\t\tlet minLat = trackPoints.value[0].latitude\r\n\t\tlet maxLat = trackPoints.value[0].latitude\r\n\t\tlet minLng = trackPoints.value[0].longitude\r\n\t\tlet maxLng = trackPoints.value[0].longitude\r\n\r\n\t\ttrackPoints.value.forEach(point => {\r\n\t\t\tminLat = Math.min(minLat, point.latitude)\r\n\t\t\tmaxLat = Math.max(maxLat, point.latitude)\r\n\t\t\tminLng = Math.min(minLng, point.longitude)\r\n\t\t\tmaxLng = Math.max(maxLng, point.longitude)\r\n\t\t})\r\n\r\n\t\treturn { minLat, maxLat, minLng, maxLng }\r\n\t}\r\n\r\n\tconst calculateTrackDistance = () => {\r\n\t\ttotalDistance.value = 0\r\n\t\tfor (let i = 1; i < trackPoints.value.length; i++) {\r\n\t\t\ttotalDistance.value += getDistance(\r\n\t\t\t\ttrackPoints.value[i - 1].latitude,\r\n\t\t\t\ttrackPoints.value[i - 1].longitude,\r\n\t\t\t\ttrackPoints.value[i].latitude,\r\n\t\t\t\ttrackPoints.value[i].longitude\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\t// 计算两点间距离（米）\r\n\tconst getDistance = (lat1 : number, lng1 : number, lat2 : number, lng2 : number) => {\r\n\t\tconst rad = (d : number) => d * Math.PI / 180.0\r\n\t\tconst radLat1 = rad(lat1)\r\n\t\tconst radLat2 = rad(lat2)\r\n\t\tconst a = radLat1 - radLat2\r\n\t\tconst b = rad(lng1) - rad(lng2)\r\n\t\tconst s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\r\n\t\t\tMath.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)))\r\n\t\treturn s * 6378.137 * 1000\r\n\t}\r\n\r\n\tconst startPlayback = () => {\r\n\t\tif (trackPoints.value.length === 0) {\r\n\t\t\tuni.showToast({ title: '没有轨迹数据', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tisPlaying.value = true\r\n\t\tcurrentIndex.value = 0\r\n\t\tinitCarMarker()\r\n\r\n\t\t// 开始播放\r\n\t\tplaybackInterval.value = setInterval(playNextPoint, 1000 / playbackSpeed.value)\r\n\t}\r\n\r\n\tconst playNextPoint = () => {\r\n\t\tif (currentIndex.value >= trackPoints.value.length - 1) {\r\n\t\t\tpausePlayback()\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tcurrentIndex.value++\r\n\t\tconst point = trackPoints.value[currentIndex.value]\r\n\r\n\t\t// 更新小车位置\r\n\t\tif (carMarker.value) {\r\n\t\t\tcarMarker.value.latitude = point.latitude\r\n\t\t\tcarMarker.value.longitude = point.longitude\r\n\t\t\tmarkers.value = [carMarker.value]\r\n\t\t}\r\n\t}\r\n\r\n\tconst pausePlayback = () => {\r\n\t\tisPlaying.value = false\r\n\t\tif (playbackInterval.value) {\r\n\t\t\tclearInterval(playbackInterval.value)\r\n\t\t\tplaybackInterval.value = null\r\n\t\t}\r\n\t}\r\n\r\n\t// 重置回放\r\n\tconst resetPlayback = () => {\r\n\t\tpausePlayback()\r\n\t\tcurrentIndex.value = 0\r\n\t\tupdatePolyline()\r\n\r\n\t\t// 重置小车位置\r\n\t\tif (trackPoints.value.length > 0) {\r\n\t\t\tinitCarMarker()\r\n\t\t\tif (carMarker.value) {\r\n\t\t\t\tcarMarker.value.latitude = trackPoints.value[0].latitude\r\n\t\t\t\tcarMarker.value.longitude = trackPoints.value[0].longitude\r\n\t\t\t\tmarkers.value = [carMarker.value]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst clearTrack = () => {\r\n\t\tpausePlayback()\r\n\t\ttrackPoints.value = []\r\n\t\tpolyline.value = []\r\n\t\ttotalDistance.value = 0\r\n\t\tcarMarker.value = null\r\n\t\tmarkers.value = []\r\n\t}\r\n\r\n\tconst setPlaybackSpeed = (e : any) => {\r\n\t\tplaybackSpeed.value = e.detail.value\r\n\t\tif (isPlaying.value) {\r\n\t\t\tpausePlayback()\r\n\t\t\tstartPlayback()\r\n\t\t}\r\n\t}\r\n\r\n\tconst updatePolyline = () => {\r\n\t\tif (!trackPoints.value || trackPoints.value.length === 0) {\r\n\t\t\tpolyline.value = []\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tpolyline.value = [{\r\n\t\t\tpoints: trackPoints.value.map(p => ({ latitude: p.latitude, longitude: p.longitude })),\r\n\t\t\tcolor: '#1890FF',\r\n\t\t\twidth: 4,\r\n\t\t\tarrowLine: true,\r\n\t\t\tborderColor: '#FFF',\r\n\t\t\tborderWidth: 2\r\n\t\t}]\r\n\t}\r\n\r\n\t/* 通用地图更新方法 */\r\n\tconst updateMapDisplay = () => {\r\n\t\t// 更新标记点\r\n\t\tconst newMarkers = []\r\n\r\n\t\t// 添加围栏顶点标记\r\n\t\tif (currentMode.value === 'draw') {\r\n\t\t\tnewMarkers.push(...points.value.map((point, index) => ({\r\n\t\t\t\tid: index + 1,\r\n\t\t\t\tlatitude: point.latitude,\r\n\t\t\t\tlongitude: point.longitude,\r\n\t\t\t\ticonPath: '/static/marker.png',\r\n\t\t\t\twidth: 20,\r\n\t\t\t\theight: 20,\r\n\t\t\t\tcallout: { content: `顶点${index + 1}`, display: 'ALWAYS' }\r\n\t\t\t})))\r\n\t\t}\r\n\r\n\t\t// 添加车辆标记\r\n\t\tif (carMarker.value) {\r\n\t\t\tnewMarkers.push(carMarker.value)\r\n\t\t}\r\n\r\n\t\tmarkers.value = newMarkers\r\n\r\n\t\t// 更新围栏多边形\r\n\t\tif (currentMode.value === 'draw' && points.value.length >= 3) {\r\n\t\t\tpolygons.value = [{\r\n\t\t\t\tpoints: points.value,\r\n\t\t\t\tstrokeWidth: 2,\r\n\t\t\t\tstrokeColor: '#FF0000',\r\n\t\t\t\tfillColor: 'rgba(255,0,0,0.2)',\r\n\t\t\t\tzIndex: 1\r\n\t\t\t}]\r\n\t\t} else {\r\n\t\t\tpolygons.value = []\r\n\t\t}\r\n\r\n\t\t// 更新轨迹线\r\n\t\tif (currentMode.value === 'track') {\r\n\t\t\tupdatePolyline()\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\r\n\t\t.map-container {\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.control-panel {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding: 10rpx;\r\n\t\tgap: 10rpx;\r\n\t\tz-index: 2;\r\n\r\n\t\tbutton {\r\n\t\t\tflex: 1;\r\n\t\t\tmin-width: 150rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\tslider {\r\n\t\t\twidth: 100%;\r\n\t\t\tmargin: 10rpx 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.info-panel {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tz-index: 2;\r\n\r\n\t\t.section-title {\r\n\t\t\tfont-weight: bold;\r\n\t\t\tmargin-bottom: 10rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\r\n\t\t.point-list {\r\n\t\t\tscroll-view {\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tpadding: 10rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.point-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 15rpx 0;\r\n\t\t\t\tborder-bottom: 1rpx solid #eee;\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbutton {\r\n\t\t\t\t\tmargin: 0;\r\n\t\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\tline-height: 50rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.track-info {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 10rpx;\r\n\r\n\t\t\ttext {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/xyhc/Documents/carConnectInternet/pages/index/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onMounted","uni","MiniProgramPage"],"mappings":"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"}