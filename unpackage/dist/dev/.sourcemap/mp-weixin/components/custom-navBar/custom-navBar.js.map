{"version":3,"file":"custom-navBar.js","sources":["components/custom-navBar/custom-navBar.uvue","/Users/xyhc/Documents/carConnectInternet/components/custom-navBar/custom-navBar.uvue?type=component"],"sourcesContent":["<template>\r\n\t<view :style=\"{ height: statusBarHeight + 'px','background-color':'#fff' }\"></view>\r\n\t<view class=\"navbar\" :style=\"{\r\n    height: navBarHeight + 'px',\r\n    background: backgroundColor\r\n  }\">\r\n\t\t<view class=\"back-btn\">\r\n\t\t\t<image  v-if=\"showBack\" src=\"/static/back.png\" mode=\"aspectFit\" class=\"icon\"  @click=\"handleBack\" />\r\n\t\t</view>\r\n\t\t<view class=\"title\" :style=\"{ color: textColor,'line-height':navBarHeight + 'px'}\">\r\n\t\t\t<slot name=\"title\">{{ title }}</slot>\r\n\t\t</view>\r\n\t\t<view v-if=\"showCapsule\" class=\"capsule\" :style=\"{\r\n      right: 170+'rpx',\r\n    }\">\r\n\t\t\t<view class=\"capsule-item\" @click=\"emit('capsuleClick', 'menu')\">\r\n\t\t\t\t<image src=\"/static/menu.png\" mode=\"aspectFit\" class=\"menu-icon\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n\tconst props = defineProps({\r\n\t\ttitle: String,\r\n\t\tshowBack: { type: Boolean, default: true },\r\n\t\tbackText: { type: String, default: '' },\r\n\t\tshowCapsule: { type: Boolean, default: true },\r\n\t\tbackgroundColor: { type: String, default: '#ffffff' },\r\n\t\ttextColor: { type: String, default: '#000000' }\r\n\t});\r\n\r\n\tconst emit = defineEmits(['back', 'capsuleClick']);\r\n\r\n\t// 动态尺寸数据\r\n\tconst statusBarHeight = ref(20);\r\n\tconst navBarHeight = ref(44);\r\n\tconst menuButtonInfo = ref({\r\n\t\ttop: 4,\r\n\t\tright: 10,\r\n\t\twidth: 87,\r\n\t\theight: 32\r\n\t});\r\n\r\n\t// 初始化尺寸数据\r\n\tconst initDimensions = () => {\r\n\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\tstatusBarHeight.value = systemInfo.statusBarHeight || 20;\r\n\r\n\t\ttry {\r\n\t\t\tconst menuRect = uni.getMenuButtonBoundingClientRect();\r\n\t\t\tif (menuRect) {\n\t\t\t\tuni.__f__('log','at components/custom-navBar/custom-navBar.uvue:53',menuRect);\r\n\t\t\t\tmenuButtonInfo.value = menuRect;\r\n\t\t\t\t// 关键计算公式 :cite[2]:cite[7]\r\n\t\t\t\tconst gap = menuRect.top - statusBarHeight.value;\r\n\t\t\t\tnavBarHeight.value = gap * 2 + menuRect.height + 4;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tuni.__f__('warn','at components/custom-navBar/custom-navBar.uvue:60','胶囊按钮信息获取失败', e);\r\n\t\t}\r\n\t};\r\n\r\n\t// 返回按钮处理\r\n\tconst handleBack = () => {\r\n\t\tconst pages = getCurrentPages();\n\t\tuni.__f__('log','at components/custom-navBar/custom-navBar.uvue:67','back',pages.length);\r\n\t\tif (pages.length > 1) {\r\n\t\t\tuni.navigateBack();\r\n\t\t} else {\r\n\t\t\tuni.switchTab({ url: '/pages/index/index' });\r\n\t\t}\r\n\t\temit('back');\r\n\t};\r\n\r\n\tonMounted(initDimensions);\r\n</script>\r\n\r\n<style scoped>\r\n\t.navbar {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.back-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\n\t\twidth: 70rpx;\n\t\theight: 40rpx;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.title {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.capsule {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.capsule-item {\r\n\t\twidth: 40px;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\n\t.menu-icon{\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t}\r\n</style>","import Component from '/Users/xyhc/Documents/carConnectInternet/components/custom-navBar/custom-navBar.uvue'\nwx.createComponent(Component)"],"names":["ref","uni","onMounted"],"mappings":";;;;;;;;;;;;;;;;AAgCC,UAAM,OAAO;AAGb,UAAM,kBAAkBA,kBAAI,EAAE;AAC9B,UAAM,eAAeA,kBAAI,EAAE;AAC3B,UAAM,iBAAiBA,kBAAI,IAAA,cAAA;AAAA,MAC1B,KAAK;AAAA,MACL,OAAO;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA,IACR,CAAA,CAAA;AAGD,UAAM,iBAAiB,MAAA;AACtB,YAAM,aAAaC,oBAAI;AACvB,sBAAgB,QAAQ,WAAW,mBAAmB;AAEtD,UAAI;AACH,cAAM,WAAWA,oBAAI;AACrB,YAAI,UAAU;AACbA,wBAAAA,MAAI,MAAM,OAAM,qDAAoD,QAAQ;AAC5E,yBAAe,QAAQ;AAEvB,gBAAM,MAAM,SAAS,MAAM,gBAAgB;AAC3C,uBAAa,QAAQ,MAAM,IAAI,SAAS,SAAS;AAAA,QACjD;AAAA,MACD,SAAQ,GAAG;AACXA,sBAAG,MAAC,MAAM,QAAO,qDAAoD,cAAc,CAAC;AAAA,MACpF;AAAA,IACF;AAGA,UAAM,aAAa,MAAA;AAClB,YAAM,QAAQ;AACdA,oBAAG,MAAC,MAAM,OAAM,qDAAoD,QAAO,MAAM,MAAM;AACvF,UAAI,MAAM,SAAS,GAAG;AACrBA,sBAAG,MAAC,aAAY;AAAA,MAChB,OAAM;AACNA,sBAAAA,MAAI,UAAU,EAAE,KAAK,qBAAsB,CAAA;AAAA,MAC3C;AACD,WAAK,MAAM;AAAA,IACZ;AAEAC,kBAAS,UAAC,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EzB,GAAG,gBAAgB,SAAS;"}